<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Website</title>
<style>
body { font-family: Arial; margin:0; background:#f5f5f5; }
header {
    display:flex; justify-content:flex-start; align-items:center;
    background:#3498db; padding:10px 20px; color:white;
}
header .cart { cursor:pointer; font-size:18px; }
header .cart:hover { text-decoration:underline; }
header #menuAccount { margin-left:auto; cursor:pointer; font-size:18px; }
header #menuAccount:hover { text-decoration:underline; }
.container { width:350px; margin:40px auto; background:white; padding:20px; border-radius:10px; box-shadow:0 0 10px #ccc; }
input { width:100%; padding:10px; margin:8px 0; }
button { width:100%; padding:10px; background:#3498db; color:white; border:none; cursor:pointer; margin-top:10px; }
.switch { text-align:center; color:#e74c3c; margin-top:10px; cursor:pointer; }
#productSection { display:none; }
.product-container { display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:20px; padding:20px; }
.product { background:white; padding:10px; border-radius:10px; box-shadow:0 0 10px #ccc; text-align:center; transition:0.3s; }
.product:hover { transform: scale(1.03); }
.product img { width:100%; height:150px; object-fit:cover; border-radius:10px; }
.product h3 { font-size:16px; margin:10px 0; }
.price { font-size:18px; color:red; font-weight:bold; }
.product button { width:100%; padding:10px; background:#3498db; color:white; border:none; margin-top:10px; cursor:pointer; }
.product button:hover { background:#217dbb; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.modal-content { background:white; padding:20px; width:90%; max-width:800px; border-radius:10px; max-height:90%; overflow-y:auto; }
.close { float:right; cursor:pointer; font-size:24px; font-weight:bold; }
table { width:100%; border-collapse:collapse; margin-top:10px; }
th, td { border:1px solid #ccc; padding:10px; text-align:center; }
th { background:#3498db; color:white; }
input.qty { width:50px; text-align:center; }
.payment { margin-top:20px; }
.payment label { display:block; margin-top:10px; }
.payment input { width:100%; padding:8px; margin-top:5px; box-sizing:border-box; }
.payment button { margin-top:15px; padding:10px 20px; background:#3498db; color:white; border:none; cursor:pointer; }
.payment button:hover { background:#217dbb; }
</style>
</head>
<body>

<header>
    <div class="cart" onclick="openCart()">üõí Gi·ªè h√†ng</div>
    <div id="menuAccount" onclick="toggleAuth()">ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</div>
</header>

<div class="container" id="authContainer">

    <div id="formDangKy">
        <h2>ƒêƒÉng k√Ω t√†i kho·∫£n</h2>
        <input type="text" id="dkUser" placeholder="T√™n ƒëƒÉng nh·∫≠p">
        <input type="password" id="dkPass" placeholder="M·∫≠t kh·∫©u">
        <input type="text" id="dkPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i (10 s·ªë)">
        <button onclick="dangKy()">ƒêƒÉng k√Ω</button>
        <p class="switch" onclick="chuyenSangDangNhap()">ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p</p>
    </div>

    <div id="formDangNhap" style="display:none;">
        <h2>ƒêƒÉng nh·∫≠p</h2>
        <input type="text" id="dnUser" placeholder="T√™n ƒëƒÉng nh·∫≠p">
        <input type="password" id="dnPass" placeholder="M·∫≠t kh·∫©u">
        <button onclick="dangNhap()">ƒêƒÉng nh·∫≠p</button>
        <p class="switch" onclick="chuyenSangDangKy()">Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω</p>
    </div>

    <div id="formDaDangNhap" style="display:none;">
        <h2>Xin ch√†o, <span id="tenUser"></span></h2>
        <button onclick="dangXuat()">ƒêƒÉng xu·∫•t</button>
    </div>

</div>

<div id="productSection">
    <h1 style="text-align:center; padding:20px;">Danh s√°ch s·∫£n ph·∫©m</h1>
    <div class="product-container" id="productContainer"></div>
</div>

<div class="modal" id="cartModal">
    <div class="modal-content">
        <span class="close" onclick="closeCart()">&times;</span>
        <h2>Gi·ªè h√†ng</h2>
        <table id="cartTable">
            <thead>
                <tr>
                    <th>ƒê∆°n h√†ng</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>Gi√°</th>
                    <th>Gi√° t·ªïng</th>
                    <th>Thu·∫ø 10%</th>
                    <th>Ph√≠ v·∫≠n chuy·ªÉn</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <div class="payment">
            <h3>Th√¥ng tin thanh to√°n</h3>
            <label>H·ªç t√™n</label>
            <input type="text" id="fullName" readonly>
            <label>S·ªë ƒëi·ªán tho·∫°i</label>
            <input type="text" id="phone" readonly>
            <label>ƒê·ªãa ch·ªâ</label>
            <input type="text" id="address" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ">
            <button onclick="thanhToan()">Thanh to√°n</button>
        </div>
    </div>
</div>

<script>
let shippingFee = 30000;
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let user = JSON.parse(localStorage.getItem("currentUser"));

// Danh s√°ch s·∫£n ph·∫©m m·ªõi
const products = [
  {id:1, name:'M√°y t√≠nh Dell', price:15000000, image:'may tinh dell.jpg'},
  {id:2, name:'Laptop HP', price:12000000, image:'laptop hp.jpg'},
  {id:3, name:'Chu·ªôt kh√¥ng d√¢y', price:200000, image:'chuot khong day.jpg'},
  {id:4, name:'B√†n ph√≠m c∆°', price:1000000, image:'ban phim co.jpg'}
];

// Render s·∫£n ph·∫©m
function renderProducts() {
    const container = document.getElementById("productContainer");
    container.innerHTML = "";
    products.forEach(product => {
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
            <img src="${product.image}" alt="${product.name}">
            <h3>${product.name}</h3>
            <p class="price">${product.price.toLocaleString()}‚Ç´</p>
            <button onclick="addToCart('${product.name}', ${product.price})">Th√™m v√†o gi·ªè h√†ng</button>
        `;
        container.appendChild(div);
    });
}

// Hi·ªÉn th·ªã tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
function hienThiDaDangNhap(){
    let u = JSON.parse(localStorage.getItem("currentUser"));
    if(u){
        document.getElementById("authContainer").style.display="none";
        document.getElementById("menuAccount").innerText="Xin ch√†o, "+u.username;
        document.getElementById("formDaDangNhap").style.display="block";
        document.getElementById("tenUser").innerText=u.username;
        document.getElementById("productSection").style.display="block";
        document.getElementById("fullName").value=u.username;
        document.getElementById("phone").value=u.phone;
        renderProducts();
    } else {
        document.getElementById("menuAccount").innerText="ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω";
        document.getElementById("authContainer").style.display="block";
    }
}

function toggleAuth(){
    let u = JSON.parse(localStorage.getItem("currentUser"));
    if(!u){
        let c=document.getElementById("authContainer");
        c.style.display=(c.style.display==="block")?"none":"block";
    }
}

function chuyenSangDangNhap(){ formDangKy.style.display="none"; formDangNhap.style.display="block"; formDaDangNhap.style.display="none"; }
function chuyenSangDangKy(){ formDangKy.style.display="block"; formDangNhap.style.display="none"; formDaDangNhap.style.display="none"; }

function dangKy(){
    let userName=dkUser.value.trim();
    let pass=dkPass.value.trim();
    let phone=dkPhone.value.trim();
    if(!userName||!pass||!phone){ alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß!"); return; }
    if(!/^\d{10}$/.test(phone)){ alert("S·ªë ƒëi·ªán tho·∫°i ph·∫£i g·ªìm 10 ch·ªØ s·ªë!"); return; }
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    if(accounts.find(a=>a.username===userName)){ alert("T√†i kho·∫£n ƒë√£ t·ªìn t·∫°i!"); chuyenSangDangNhap(); return; }
    accounts.push({username:userName,password:pass,phone:phone});
    localStorage.setItem("accounts",JSON.stringify(accounts));
    alert("ƒêƒÉng k√Ω th√†nh c√¥ng!");
    chuyenSangDangNhap();
}

function dangNhap(){
    let userName=dnUser.value.trim();
    let pass=dnPass.value.trim();
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    let found=accounts.find(a=>a.username===userName && a.password===pass);
    if(!found){ alert("Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u!"); return; }
    localStorage.setItem("currentUser",JSON.stringify(found));
    alert("ƒêƒÉng nh·∫≠p th√†nh c√¥ng!");
    hienThiDaDangNhap();
}

function dangXuat(){
    localStorage.removeItem("currentUser");
    alert("ƒê√£ ƒëƒÉng xu·∫•t!");
    location.reload();
}

function addToCart(name, price){
    let found=cart.find(p=>p.name===name);
    if(found){ found.qty+=1; } else { cart.push({name:name,price:price,qty:1}); }
    localStorage.setItem("cart",JSON.stringify(cart));
    alert("ƒê√£ th√™m v√†o gi·ªè h√†ng!");
}

function openCart(){ renderCart(); document.getElementById("cartModal").style.display="flex"; }
function closeCart(){ document.getElementById("cartModal").style.display="none"; }

function renderCart(){
    let tbody=document.querySelector("#cartTable tbody");
    let paymentSection = document.querySelector(".payment");
    tbody.innerHTML="";

    if(cart.length===0){
        tbody.innerHTML='<tr><td colspan="6">Gi·ªè h√†ng tr·ªëng</td></tr>';
        paymentSection.style.display = "none";
        return;
    } else {
        paymentSection.style.display = "block";
    }

    cart.forEach((item,i)=>{
        let total=item.price*item.qty;
        let tax=Math.round(total*0.1);
        let row=document.createElement("tr");
        row.innerHTML=`<td>${item.name}</td>
        <td><input type="number" class="qty" min="1" value="${item.qty}" onchange="updateQty(${i},this.value)"></td>
        <td>${item.price.toLocaleString()}‚Ç´</td>
        <td>${total.toLocaleString()}‚Ç´</td>
        <td>${tax.toLocaleString()}‚Ç´</td>
        <td>${shippingFee.toLocaleString()}‚Ç´</td>`;
        tbody.appendChild(row);
    });
}

function updateQty(index,value){
    value=parseInt(value); if(value<1)value=1;
    cart[index].qty=value;
    localStorage.setItem("cart",JSON.stringify(cart));
    renderCart();
}

function thanhToan(){
    if(cart.length===0){
        alert("ƒê∆°n h√†ng tr·ªëng!");
        return;
    }
    let address=document.getElementById("address").value.trim();
    if(!address){ alert("Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ!"); return; }
    let info="Th√¥ng tin ƒë∆°n h√†ng:\n\n";
    let totalAmount=0;
    cart.forEach((item,i)=>{
        let total=item.price*item.qty;
        let tax=Math.round(total*0.1);
        info+=`${i+1}. ${item.name} - S·ªë l∆∞·ª£ng: ${item.qty}, Gi√°: ${item.price.toLocaleString()}‚Ç´, T·ªïng: ${total.toLocaleString()}‚Ç´, Thu·∫ø: ${tax.toLocaleString()}‚Ç´, Ph√≠ v·∫≠n chuy·ªÉn: ${shippingFee.toLocaleString()}‚Ç´\n`;
        totalAmount+=total+tax+shippingFee;
    });
    info+=`\nT·ªïng thanh to√°n: ${totalAmount.toLocaleString()}‚Ç´`;
    info+=`\n\nH·ªç t√™n: ${user.username}\nSƒêT: ${user.phone}\nƒê·ªãa ch·ªâ: ${address}`;
    alert(info);
}

hienThiDaDangNhap();
</script>

</body>
                </html>
              

