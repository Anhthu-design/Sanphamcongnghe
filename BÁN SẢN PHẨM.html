<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Website</title>
<style>
body { font-family: Arial; margin:0; background:#f5f5f5; }

/* HEADER */
header {
    display:flex;
    justify-content:flex-start;
    align-items:center;
    background:#3498db;
    padding:10px 20px;
    color:white;
}
header .cart { cursor:pointer; font-size:18px; }
header .cart:hover { text-decoration:underline; }
header #menuAccount { margin-left:auto; cursor:pointer; font-size:18px; }
header #menuAccount:hover { text-decoration:underline; }

/* KHUNG ÄÄ‚NG NHáº¬P / ÄÄ‚NG KÃ */
.container {
    width:350px;
    margin:40px auto;
    background:white;
    padding:20px;
    border-radius:10px;
    box-shadow:0 0 10px #ccc;
}
input {
    width:100%;
    padding:10px;
    margin:8px 0;
}
button {
    width:100%;
    padding:10px;
    background:#3498db;
    color:white;
    border:none;
    cursor:pointer;
    margin-top:10px;
}
.switch {
    text-align:center;
    color:#e74c3c;
    margin-top:10px;
    cursor:pointer;
}

/* DANH SÃCH Sáº¢N PHáº¨M */
#productSection { display:none; }
.product-container {
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap:20px;
    padding:20px;
}
.product {
    background:white;
    padding:10px;
    border-radius:10px;
    box-shadow:0 0 10px #ccc;
    text-align:center;
    transition:0.3s;
}
.product:hover { transform: scale(1.03); }
.product img { width:100%; height:150px; object-fit:cover; border-radius:10px; }
.product h3 { font-size:16px; margin:10px 0; }
.price { font-size:18px; color:red; font-weight:bold; }
.product button { width:100%; padding:10px; background:#3498db; color:white; border:none; margin-top:10px; cursor:pointer; }
.product button:hover { background:#217dbb; }

/* Modal giá» hÃ ng */
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.modal-content { background:white; padding:20px; width:90%; max-width:800px; border-radius:10px; max-height:90%; overflow-y:auto; }
.close { float:right; cursor:pointer; font-size:24px; font-weight:bold; }
table { width:100%; border-collapse:collapse; margin-top:10px; }
th, td { border:1px solid #ccc; padding:10px; text-align:center; }
th { background:#3498db; color:white; }
input.qty { width:50px; text-align:center; }

/* ThÃ´ng tin thanh toÃ¡n */
.payment { margin-top:20px; }
.payment label { display:block; margin-top:10px; }
.payment input { width:100%; padding:8px; margin-top:5px; box-sizing:border-box; }
.payment button { margin-top:15px; padding:10px 20px; background:#3498db; color:white; border:none; cursor:pointer; }
.payment button:hover { background:#217dbb; }
</style>
</head>
<body>

<header>
    <div class="cart" onclick="openCart()">ğŸ›’ Giá» hÃ ng</div>
    <div id="menuAccount" onclick="toggleAuth()">ÄÄƒng nháº­p / ÄÄƒng kÃ½</div>
</header>

<!-- KHUNG ÄÄ‚NG NHáº¬P / ÄÄ‚NG KÃ -->
<div class="container" id="authContainer">

    <!-- ÄÄ‚NG KÃ -->
    <div id="formDangKy">
        <h2>ÄÄƒng kÃ½ tÃ i khoáº£n</h2>
        <input type="text" id="dkUser" placeholder="TÃªn Ä‘Äƒng nháº­p">
        <input type="password" id="dkPass" placeholder="Máº­t kháº©u">
        <input type="text" id="dkPhone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i (10 sá»‘)">
        <button onclick="dangKy()">ÄÄƒng kÃ½</button>
        <p class="switch" onclick="chuyenSangDangNhap()">ÄÃ£ cÃ³ tÃ i khoáº£n? ÄÄƒng nháº­p</p>
    </div>

    <!-- ÄÄ‚NG NHáº¬P -->
    <div id="formDangNhap" style="display:none;">
        <h2>ÄÄƒng nháº­p</h2>
        <input type="text" id="dnUser" placeholder="TÃªn Ä‘Äƒng nháº­p">
        <input type="password" id="dnPass" placeholder="Máº­t kháº©u">
        <button onclick="dangNhap()">ÄÄƒng nháº­p</button>
        <p class="switch" onclick="chuyenSangDangKy()">ChÆ°a cÃ³ tÃ i khoáº£n? ÄÄƒng kÃ½</p>
    </div>

    <!-- SAU KHI ÄÄ‚NG NHáº¬P -->
    <div id="formDaDangNhap" style="display:none;">
        <h2>Xin chÃ o, <span id="tenUser"></span></h2>
        <button onclick="dangXuat()">ÄÄƒng xuáº¥t</button>
    </div>

</div>

<!-- DANH SÃCH Sáº¢N PHáº¨M -->
<div id="productSection">
    <h1 style="text-align:center; padding:20px;">Danh sÃ¡ch sáº£n pháº©m</h1>
    <div class="product-container">
        <div class="product">
            <img src="https://via.placeholder.com/300x200" alt="">
            <h3>Äá»“ng há»“ Ä‘iá»‡n tá»­ mini</h3>
            <p class="price">120.000â‚«</p>
            <button onclick="addToCart('Äá»“ng há»“ Ä‘iá»‡n tá»­ mini',120000)">ThÃªm vÃ o giá» hÃ ng</button>
        </div>
        <div class="product">
            <img src="https://via.placeholder.com/300x200" alt="">
            <h3>Bá»™ Ä‘o nhiá»‡t Ä‘á»™ thÃ´ng minh</h3>
            <p class="price">250.000â‚«</p>
            <button onclick="addToCart('Bá»™ Ä‘o nhiá»‡t Ä‘á»™ thÃ´ng minh',250000)">ThÃªm vÃ o giá» hÃ ng</button>
        </div>
        <div class="product">
            <img src="https://via.placeholder.com/300x200" alt="">
            <h3>MÃ¡y Ä‘o Ä‘iá»‡n Ä‘a nÄƒng</h3>
            <p class="price">480.000â‚«</p>
            <button onclick="addToCart('MÃ¡y Ä‘o Ä‘iá»‡n Ä‘a nÄƒng',480000)">ThÃªm vÃ o giá» hÃ ng</button>
        </div>
        <div class="product">
            <img src="https://via.placeholder.com/300x200" alt="">
            <h3>CÃ´ng táº¯c háº¹n giá»</h3>
            <p class="price">95.000â‚«</p>
            <button onclick="addToCart('CÃ´ng táº¯c háº¹n giá»',95000)">ThÃªm vÃ o giá» hÃ ng</button>
        </div>
    </div>
</div>

<!-- Modal giá» hÃ ng -->
<div class="modal" id="cartModal">
    <div class="modal-content">
        <span class="close" onclick="closeCart()">&times;</span>
        <h2>Giá» hÃ ng</h2>
        <table id="cartTable">
            <thead>
                <tr>
                    <th>ÄÆ¡n hÃ ng</th>
                    <th>Sá»‘ lÆ°á»£ng</th>
                    <th>GiÃ¡</th>
                    <th>GiÃ¡ tá»•ng</th>
                    <th>Thuáº¿ 10%</th>
                    <th>PhÃ­ váº­n chuyá»ƒn</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <div class="payment">
            <h3>ThÃ´ng tin thanh toÃ¡n</h3>
            <label>Há» tÃªn</label>
            <input type="text" id="fullName" readonly>
            <label>Sá»‘ Ä‘iá»‡n thoáº¡i</label>
            <input type="text" id="phone" readonly>
            <label>Äá»‹a chá»‰</label>
            <input type="text" id="address" placeholder="Nháº­p Ä‘á»‹a chá»‰">
            <button onclick="thanhToan()">Thanh toÃ¡n</button>
        </div>
    </div>
</div>

<script>
let shippingFee = 30000;
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let user = JSON.parse(localStorage.getItem("currentUser"));

/* Hiá»ƒn thá»‹ tráº¡ng thÃ¡i tÃ i khoáº£n */
function hienThiDaDangNhap(){
    let u = JSON.parse(localStorage.getItem("currentUser"));
    if(u){
        document.getElementById("authContainer").style.display="none";
        document.getElementById("menuAccount").innerText = "Xin chÃ o, " + u.username;
        document.getElementById("formDaDangNhap").style.display="block";
        document.getElementById("tenUser").innerText = u.username;
        document.getElementById("productSection").style.display="block";
        document.getElementById("fullName").value = u.username;
        document.getElementById("phone").value = u.phone;
    } else {
        document.getElementById("menuAccount").innerText = "ÄÄƒng nháº­p / ÄÄƒng kÃ½";
        document.getElementById("authContainer").style.display="block";
    }
}

/* Toggle hiá»ƒn thá»‹ authContainer */
function toggleAuth(){
    let c = document.getElementById("authContainer");
    c.style.display = (c.style.display==="block")?"none":"block";
}

/* Chuyá»ƒn form */
function chuyenSangDangNhap(){ formDangKy.style.display="none"; formDangNhap.style.display="block"; formDaDangNhap.style.display="none"; }
function chuyenSangDangKy(){ formDangKy.style.display="block"; formDangNhap.style.display="none"; formDaDangNhap.style.display="none"; }

/* ÄÄƒng kÃ½ */
function dangKy(){
    let userName = dkUser.value.trim();
    let pass = dkPass.value.trim();
    let phone = dkPhone.value.trim();
    if(!userName||!pass||!phone){ alert("Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§!"); return; }
    if(!/^\d{10}$/.test(phone)){ alert("Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i gá»“m 10 chá»¯ sá»‘!"); return; }
    let accounts = JSON.parse(localStorage.getItem("accounts"))||[];
    if(accounts.find(a=>a.username===userName)){ alert("TÃ i khoáº£n Ä‘Ã£ tá»“n táº¡i!"); chuyenSangDangNhap(); return; }
    accounts.push({username:userName,password:pass,phone:phone});
    localStorage.setItem("accounts",JSON.stringify(accounts));
    alert("ÄÄƒng kÃ½ thÃ nh cÃ´ng!");
    chuyenSangDangNhap();
}

/* ÄÄƒng nháº­p */
function dangNhap(){
    let userName=dnUser.value.trim();
    let pass=dnPass.value.trim();
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    let found=accounts.find(a=>a.username===userName && a.password===pass);
    if(!found){ alert("Sai tÃ i khoáº£n hoáº·c máº­t kháº©u!"); return; }
    localStorage.setItem("currentUser",JSON.stringify(found));
    alert("ÄÄƒng nháº­p thÃ nh cÃ´ng!");
    hienThiDaDangNhap();
}

/* ÄÄƒng xuáº¥t */
function dangXuat(){
    localStorage.removeItem("currentUser");
    alert("ÄÃ£ Ä‘Äƒng xuáº¥t!");
    location.reload();
}

/* ThÃªm sáº£n pháº©m vÃ o giá» hÃ ng */
function addToCart(name, price){
    let found = cart.find(p=>p.name===name);
    if(found){ found.qty+=1; } else { cart.push({name:name,price:price,qty:1}); }
    localStorage.setItem("cart",JSON.stringify(cart));
    alert("ÄÃ£ thÃªm vÃ o giá» hÃ ng!");
}

/* Popup giá» hÃ ng */
function openCart(){ renderCart(); document.getElementById("cartModal").style.display="flex"; }
function closeCart(){ document.getElementById("cartModal").style.display="none"; }

/* Render giá» hÃ ng */
function renderCart(){
    let tbody=document.querySelector("#cartTable tbody");
    tbody.innerHTML="";
    cart.forEach((item,i)=>{
        let total=item.price*item.qty;
        let tax=Math.round(total*0.1);
        let row=document.createElement("tr");
        row.innerHTML=`<td>${item.name}</td>
        <td><input type="number" class="qty" min="1" value="${item.qty}" onchange="updateQty(${i},this.value)"></td>
        <td>${item.price.toLocaleString()}â‚«</td>
        <td>${total.toLocaleString()}â‚«</td>
        <td>${tax.toLocaleString()}â‚«</td>
        <td>${shippingFee.toLocaleString()}â‚«</td>`;
        tbody.appendChild(row);
    });
}

/* Cáº­p nháº­t sá»‘ lÆ°á»£ng */
function updateQty(index,value){
    value=parseInt(value); if(value<1)value=1;
    cart[index].qty=value;
    localStorage.setItem("cart",JSON.stringify(cart));
    renderCart();
}

/* Thanh toÃ¡n */
function thanhToan(){
    let address=document.getElementById("address").value.trim();
    if(!address){ alert("Vui lÃ²ng nháº­p Ä‘á»‹a chá»‰!"); return; }
    let info="ThÃ´ng tin Ä‘Æ¡n hÃ ng:\n\n";
    let totalAmount=0;
    cart.forEach((item,i)=>{
        let total=item.price*item.qty;
        let tax=Math.round(total*0.1);
        info+=`${i+1}. ${item.name} - Sá»‘ lÆ°á»£ng: ${item.qty}, GiÃ¡: ${item.price.toLocaleString()}â‚«, Tá»•ng: ${total.toLocaleString()}â‚«, Thuáº¿: ${tax.toLocaleString()}â‚«, PhÃ­ váº­n chuyá»ƒn: ${shippingFee.toLocaleString()}â‚«\n`;
        totalAmount+=total+tax+shippingFee;
    });
    info+=`\nTá»•ng thanh toÃ¡n: ${totalAmount.toLocaleString()}â‚«`;
    info+=`\n\nHá» tÃªn: ${user.username}\nSÄT: ${user.phone}\nÄá»‹a chá»‰: ${address}`;
    alert(info);
}

hienThiDaDangNhap();
</script>

</body>
  </html>
              
